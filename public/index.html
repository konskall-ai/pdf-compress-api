<!doctype html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PDF Compressor</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --navy: #182e4e; --navy2: #254a7c;
      --gray: #f6f7fa; --gray2: #ebeff6; --white: #fff;
      --accent: #2493ef; --error: #cb3142; --success: #22bb88;
      --card-shadow:0 8px 32px rgba(18,34,60,.10); --radius:15px;
    }
    html, body { background:var(--gray); margin:0; color:#1e2335; }
    body { font-family:'Inter',system-ui,sans-serif; }
    header {
      background:linear-gradient(90deg,var(--navy2), var(--navy));
      color:var(--white); padding:25px 0 20px;text-align:center;
      font-size:2rem;font-weight:700; letter-spacing:.07em; box-shadow:0 2px 18px rgba(30,46,78,0.07);
	  box-shadow: 0 6px 24px rgba(20,40,80,0.17);
    }
    main { max-width:660px; margin:38px auto 0 auto; padding:0 10px; }
    .card {
      background:var(--white); border-radius:var(--radius);
      box-shadow:var(--card-shadow); padding:32px 32px 28px 32px;
      margin: 0 auto; min-height:400px; display:flex; flex-direction:column; gap:33px;
    }
    .row {display:flex;gap:22px;flex-wrap:wrap;}
    .col {flex:1 1 310px;min-width:0;}
    .drop {border:2px dashed #c7d2e5;border-radius:var(--radius);
      background:linear-gradient(180deg,#fff,var(--gray) 86%);
      min-height:150px;display:flex;flex-direction:column;align-items:center;justify-content:center;
      gap:8px;text-align:center;transition: border-color .2s,background .15s;cursor:pointer;
    }
    .drop.dragover { border-color: var(--accent); background: #e5f0ff;}
    .drop-icon {font-size:38px;margin-bottom:8px}
    .drop-text {font-size:16px;color:#334;}
    .drop input {display:none;}
    #previewZone {
      margin-top:12px; background:#fafdff; border-radius:12px;
      border:1.4px solid #e3eaff; padding:9px 10px 8px 10px; display:none;
      box-shadow:0 2px 10px rgba(30,60,100,0.07);
      align-items:center;
    }
    .preview-flex { display: flex; align-items: center;gap:12px;}
    .pdf-thumb {
      width:34px;height:44px;border-radius:6px;background:#e0e7ef;
      object-fit:cover;box-shadow:0 1px 5px rgba(0,0,0,.03);
      display:block;
    }
    .pdf-info { flex:1 1 auto;min-width:1px; }
    .pdf-title {font-weight:600;color:var(--navy2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .pdf-size {font-size:13px;color:#708091;}
    .remove-btn {
      background:none;border:none;color:#adb0ba;font-size:1.3em;cursor:pointer;
      padding:0 7px; border-radius:50%;transition:background .16s;
    }
    .remove-btn:hover {background:#eff2fa; color:#cb3142;}
    label.floating-label {font-size:15.3px;color:#244476;margin:10px 0 6px;font-weight:500;}
    select, .btn {
      font-family:inherit;border-radius:var(--radius);
      font-size:15.7px;border:1.3px solid #dbe4ef;
      transition:border-color .18s;
    }
    select {
      min-height:43px;padding:0 12px;width:100%;background:#fff;
      color:#132c4f;font-weight:600;
    }
    select:focus {border-color:var(--accent);}
    .btn {
      display:inline-flex;align-items:center;justify-content:center;gap:7px;
      min-height:43px; background:linear-gradient(92deg,var(--accent),var(--navy2) 75%);
      color:#fff;padding:0 26px;font-weight:700;border:none;margin-top:15px;cursor:pointer;
      transition:background .13s, box-shadow .13s,transform .10s;box-shadow:0 1.5px 8px rgba(33,134,204,.06);
    }
    .btn:disabled { opacity:.64;cursor:not-allowed;}
    .btn:hover:not(:disabled) {
      background:linear-gradient(90deg,#43b8fd,var(--accent) 60%);
      box-shadow:0 7px 13px rgba(22,66,124,.11);transform:scale(1.022);
    }
    .progress-wrap { margin:16px 0 9px;display:none;}
    .progress-text {color:#6c87ac;margin:7px 0 0 2px;font-size:14px;}
    progress { width:100%;height:11px;border-radius:7px;background:#eaf0fa;margin-bottom:0px;}
    .results {
      margin:17px 2px 0;
      background:#fafdff; border-radius:12px;
      box-shadow:0 1.5px 6px rgba(30,50,98,0.03);
      padding:11px 12px 7px 12px;font-size:15.8px;
      border:1.1px solid #e6eefa;display:none;
    }
    .results .stat {display:flex;align-items:center;justify-content:space-between;margin:9px 0;}
    .results .label {color:#60749a;font-size:14px;}
    .results .value {color:#212862;font-weight:700;}
    .results .value.success {color:var(--success);}
    .results .value.red {color:var(--error);}
    footer {
      background:linear-gradient(90deg,var(--navy2), var(--navy));
      color:#eaf4fe;text-align:center;padding:13px 0 9px 0;
      border-radius:0 0 16px 16px;font-size:15px;letter-spacing:.03em;
      margin:44px 0 2px 0;box-shadow:0 -3px 33px rgba(22,44,88,0.07);
	  padding:30px 0 30px 0;
	  box-shadow: 0 -6px 24px rgba(20,40,80,0.17);
    }
    @media (max-width:900px){
      main, .card{max-width:85vw;}
      .row {flex-direction:column;gap:29px;}
      .col {min-width:unset}
      .card{padding:17px 4vw;}
    }
	@media (max-width: 1000px) {
  main, .card { max-width: 97vw; }
  .row { flex-direction: column; gap: 0px; }
  .col { min-width: unset; width: 100%; }
  .card { padding: 16px 4vw 22px 4vw; }
}
@media (max-width: 600px) {
  header { font-size: 1.05rem; padding:14px 2vw;}
  main { padding: 0 2vw; }
  .card,
  .drop { padding: 9px 2vw; }
  .btn    { min-width: 94vw; font-size: 1em; margin-left: auto; margin-right: auto; display: block;}
  select  { width: 100%; font-size: 1em; }
  .results{ padding:7px 2vw; }
  #fileInfo, .drop-text, label, .stat-label, .stat-value { font-size:1em }
  .pdf-title { font-size: 0.98em; }
  .pdf-thumb { width: 25px; height: 32px; }
  #previewZone {padding:7px 2vw;}
}
.btn, select, .drop, .results {
  box-sizing: border-box;
  width: 100%;
}
.pdf-title { white-space:normal; overflow-wrap: break-word; word-break:break-all; }
  </style>
</head>
<body>
  <header>PDF Compressor</header>
  <main>
    <div class="card">
      <div class="row">
        <div class="col">
          <div class="drop" id="drop">
            <div class="drop-icon">
  <img src="https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg" alt="PDF" style="width:38px; height:46px; display:block; margin:0 auto;" />
</div>
            <div class="drop-text"><strong>Κάντε κλικ ή σύρετε το PDF εδώ</strong></div>
            <div class="drop-text" style="font-size:14px;color:#788493;">Υποστηρίζονται αρχεία έως 10MB</div>
            <input id="file" type="file" accept="application/pdf">
          </div>
          <div id="previewZone">
            <div class="preview-flex">
              <img class="pdf-thumb" id="pdfThumb" src="https://upload.wikimedia.org/wikipedia/commons/8/87/PDF_file_icon.svg" alt="PDF" />
              <div class="pdf-info">
                <div class="pdf-title" id="previewName"></div>
                <div class="pdf-size" id="previewSize"></div>
              </div>
              <button class="remove-btn" id="removeBtn" title="Αφαίρεση">&times;</button>
            </div>
          </div>
        </div>
        <div class="col">
          <label class="floating-label" for="quality">Επίπεδο Συμπίεσης</label>
          <select id="quality">
            <option value="HIGH">Υψηλή συμπίεση (μικρότερο μέγεθος)</option>
            <option value="MEDIUM" selected>Ισορροπημένη (προτεινόμενη)</option>
            <option value="LOW">Χαμηλή (καλύτερη ποιότητα)</option>
          </select>
          <div style="margin-top:24px;display:flex;justify-content:center;gap:12px;flex-wrap:wrap">
  <button class="btn" id="compressBtn" disabled>
    <span id="btnText">Συμπίεση PDF</span>
  </button>
</div>
          <div class="progress-wrap" id="progressWrap">
            <progress id="progress" value="0" max="100"></progress>
            <div class="progress-text" id="progressText">Επεξεργασία...</div>
          </div>
          <div class="results" id="results"></div>
        </div>
      </div>
    </div>
  </main>
  <footer>
    © 2025 PDF Compressor • Powered by <a href="http://linkedin.com/in/konstantinos-kalliakoudis-902b90103"style="color:#FFFF;">KonsKall</a>
  </footer>
  <script>
    const API_URL = 'https://your-api-host.onrender.com';
    const fileInput = document.getElementById('file');
    const drop = document.getElementById('drop');
    const previewZone = document.getElementById('previewZone');
    const pdfThumb = document.getElementById('pdfThumb');
    const previewName = document.getElementById('previewName');
    const previewSize = document.getElementById('previewSize');
    const removeBtn = document.getElementById('removeBtn');
    const compressBtn = document.getElementById('compressBtn');
    const qualitySel = document.getElementById('quality');
    const progressWrap = document.getElementById('progressWrap');
    const progress = document.getElementById('progress');
    const progressText = document.getElementById('progressText');
    const results = document.getElementById('results');
    let selectedFile = null;

    function fmtBytes(n){
      if(!n && n!==0) return '0 B';
      const k=1024, sizes=['B','KB','MB','GB'];
      const i=Math.floor(Math.log(n)/Math.log(k));
      return (n/Math.pow(k,i)).toFixed(2)+' '+sizes[i];
    }

    function setFile(f) {
      selectedFile = f;
      previewZone.style.display = 'block';
      previewName.textContent = f.name;
      previewSize.textContent = fmtBytes(f.size);
      compressBtn.disabled = false;
      results.style.display = 'none';
    }

    drop.addEventListener('click', ()=> fileInput.click());
    drop.addEventListener('dragover', e=>{
      e.preventDefault(); drop.classList.add('dragover');
    });
    drop.addEventListener('dragleave', ()=> drop.classList.remove('dragover'));
    drop.addEventListener('drop', e=>{
      e.preventDefault(); drop.classList.remove('dragover');
      const f = e.dataTransfer.files[0];
      if(f && f.type==='application/pdf'){
        setFile(f);
        fileInput.files = e.dataTransfer.files;
      }
    });
    fileInput.addEventListener('change', e=>{
      const f = e.target.files[0];
      if(f && f.type==='application/pdf'){ setFile(f);}
    });
    removeBtn.addEventListener('click', ()=>{
      fileInput.value = '';
      previewZone.style.display = 'none';
      compressBtn.disabled = true;
      selectedFile = null;
      results.style.display = 'none';
    });

    compressBtn.addEventListener('click', async ()=>{
      if(!selectedFile) return;
      compressBtn.disabled = true;
      progressWrap.style.display = 'block';
      progress.value = 10; progressText.textContent = "Ανέβασμα PDF...";
      results.style.display = 'none';
      try {
        const formData = new FormData();
        formData.append('pdf', selectedFile);
        formData.append('compressionLevel', qualitySel.value);
        progress.value = 32; progressText.textContent = "Συμπίεση...";
        const response = await fetch(`${API_URL}/api/compress`, {method:'POST',body:formData});
        progress.value = 82;
        if(!response.ok){
          let msg = "Σφάλμα κατά τη συμπίεση";
          try { const j = await response.json(); msg = j.error; } catch {}
          throw new Error(msg);
        }
        progress.value = 97; progressText.textContent = "Λήψη...";
        const blob = await response.blob();
        const compressedSize = blob.size;
        const originalSize = selectedFile.size;
        const reduction = originalSize - compressedSize;
        const pct = originalSize > 0 ? ((reduction/originalSize)*100).toFixed(1) : '0.0';
        progress.value = 100;
        // Download
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = selectedFile.name.replace(/\.pdf$/i, '') + '.compressed.pdf';
        document.body.appendChild(a); a.click();
        setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); },110);
        results.innerHTML = `
          <div class="stat"><span class="label">Αρχικό μέγεθος:</span><span class="value">${fmtBytes(originalSize)}</span></div>
          <div class="stat"><span class="label">Τελικό μέγεθος:</span><span class="value">${fmtBytes(compressedSize)}</span></div>
          <div class="stat"><span class="label">Μείωση:</span><span class="value success">${fmtBytes(reduction)} (${pct}%)</span></div>
          <div style="margin-top:16px;padding-top:16px;border-top:1px solid #d4edda;color:var(--success);display:flex;align-items:center;justify-content:center;gap:9px;">
  <svg width="22" height="22" viewBox="0 0 22 22" fill="none"><rect width="22" height="22" rx="6" fill="#20bb75"/><path d="M6 11.5l3 3 7-7" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
  <span>Το συμπιεσμένο αρχείο PDF κατέβηκε επιτυχώς!</span>
</div>
        `;
        results.style.display = 'block';
        progressText.textContent = "Ολοκληρώθηκε!";
        setTimeout(()=>progressWrap.style.display = 'none',1200);
      } catch(err){
        results.innerHTML = `<span class="value red">❌</span> Σφάλμα: ${err.message||'Απέτυχε η συμπίεση.'}`;
        results.style.display = 'block';
        progressWrap.style.display = 'none';
      } finally {
        compressBtn.disabled = false;
      }
    });
  </script>
</body>
</html>